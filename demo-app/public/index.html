<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="theme-color" content="#000000" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <div id="root2"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    <!-- <script>
      'use strict';


      const outer = () => {

        let t = 2;

        setTimeout(() => {
          t = 4;
        }, 2000);

        return () => {
          console.log(t);
        };
      };

      const inner = outer();

      inner(); // 2

      setTimeout(() => {
        inner(); // 4
      }, 4000);

      // console.dir(inner);
    
    </script> -->

    <!-- <script>
      'use strict';

      // setTimeout(() => {
      //         console.log('a');
      //         setTimeout(() => {
      //                 console.log('b');
      //                 setTimeout(() => {
      //                         console.log('c');
      //                 }, 500);
      //         }, 1000);
      // }, 2000);

      function allDone() {
        console.log('all done');
      }

      let counter = 0;

      counter++;
      setTimeout(() => {
        console.log('a');
        counter--;
        if (counter === 0) {
          allDone();
        }
      }, 2000);

      counter++;
      setTimeout(() => {
        console.log('b');
        counter--;
        if (counter === 0) {
          allDone();
        }
      }, 1000);

      counter++;
      setTimeout(() => {
        console.log('c');
        counter--;
        if (counter === 0) {
          allDone();
        }
      }, 4000);

      counter++;
      setTimeout(() => {
        console.log('d');
        counter--;
        if (counter === 0) {
          allDone();
        }
      }, 3000);

      // Lab Exercise: All four 'setTimeout' calls should occur in the same task, when all four have had the callback functions invoked run the 'allDone' function


    </script> -->

    <script>
      
      // 'use strict';

      // class Promise {


      //   constructor(fn) {

      //     this.resolveFns = [];
      //     this.rejectFns = [];

      //     const resolveFn = (result) => {
      //       this.resolveFns.forEach(resolveFn => resolveFn(result));
      //     }

      //     const rejectFn = (result) => {
      //       this.rejectFns.forEach(resolveFn => rejectFn(result));
      //     }

      //     fn(resolveFn, rejectFn);

      //   }

      //   then(fn) {
      //     this.resolveFns.push(fn);

      //     return new Promise() { };
      //   }

      //   catch(fn) {
      //     this.rejectFns.push(fn);

      //     return new Promise() { };
      //   }

      // }



      // const youngMan = new Promise(function youngLady(resolve, reject) {

      //   console.log('young lady is considering the request...');

      //   setTimeout(() => {
      //     console.log('she says yes...');
      //     resolve('she is madly in love with the young man...'); 
      //   }, 3000);

      // });

      // youngMan
      //   .then((results) => {
      //     console.log('yay she said yes!');
      //     console.log(results);

      //     console.log('let\'s find a place to tie the not...');
      //     const findAPlacePromise = new Promise((resolve) => {
      //       setTimeout(() => {
      //         resolve('found a place to get married!');
      //       }, 3000);
      //     });

      //     return findAPlacePromise;
      //   })
      //   .then(results => {
      //     console.log(results);

      //     console.log('find something to wear to the wedding...');

      //     const findClothesPromise = new Promise((resolve) => {
      //       setTimeout(() => {
      //         resolve('found something to wear');
      //       }, 3000);
      //     });

      //     return findClothesPromise;
      //   })
      //   .then(results => {
      //     console.log(results);
      //   })
      //   .catch((results) => {
      //     console.log('time to sign up for eHarmony for a more compatible match!');
      //     console.log(results);
      //   })
      //   .finally(() => {

      //   });

      // console.log('young man is waiting');

      // const myFetch = (url, options = { 
      //   method: 'GET',
      //   headers: {},
      //   body: null,
      // }) => {

      //   return new Promise((resolve, reject) => {

      //     const xhr = new XMLHttpRequest();

      //     xhr.addEventListener('readystatechange', () => {        
      //       if (xhr.status >= 200 && xhr.status < 400 && xhr.readyState === 4) {
      //         resolve(JSON.parse(xhr.responseText));
      //       }
      //     });

      //     xhr.open(options.method, url);

      //     Object.keys(options.headers).forEach(headerKey => {
      //       xhr.setRequestHeader(headerKey, options.headers[headerKey]); });

      //     if (options.body == null) {
      //       xhr.send();
      //     } else {
      //       xhr.send(options.body);
      //     }

      //   });
      // };

      // Exercise:

      // Using the example code below, write some code using myFetch and promise to perform the following operation

      // Add a Leaf Car
      // Get the Leaf Car
      // Replace the Leaf Car with a model year of one year higher
      // Get the Leaf Car
      // Delete the Leaf Car
      // Get All the Cars and ensure the deleted Leaf Car is not present

      // myFetch('http://localhost:3050/cars').then(cars => console.log(cars));

      // myFetch('http://localhost:3050/cars', {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify({ make: 'a', model: 'a', year: 1900, color: 'g', price: 123 }),
      // }).then(car => console.log(car));

      // const p = new Promise(resolve => {
      //   setTimeout(() => {
      //     resolve('a');
      //   }, 2000);
      // });

      // const p1 = new Promise(resolve => setTimeout(() => resolve('a'), 2000));
      // const p2 = new Promise(resolve => setTimeout(() => resolve('b'), 4000));
      // const p3 = new Promise((resolve, reject) => setTimeout(() => reject('c'), 6000));
      // const p4 = new Promise(resolve => setTimeout(() => resolve('d'), 8000));

      // p1.then(result => console.log(result));
      // p2.then(result => console.log(result));
      // p3.then(result => console.log(result)).catch(results => console.log('failed', results));
      // p4.then(result => console.log(result));

      // Promise.all([p1,p2,p3,p4]).then(results => {
      //   console.log(results);
      //   console.log('all done');
      // }).catch(results => {
      //   console.log(results);
      //   console.log('one failed');
      // });

      // Promise.race([p1,p2,p3,p4]).then(result => {
      //   console.log(result);
      //   console.log('first one finished');
      // });

      
      // const getAllCars = () => {
      //   return fetch('http://localhost:3050/cars')
      //     .then(res => res.json());
      // }  

      // const getAllCars = async () => {
      //   const res = await fetch('http://localhost:3050/cars');
      //   const cars = await res.json();
      //   return cars;
      // };  

      // getAllCars().then(cars => console.log(cars));

      // function* getNums() {
      //   console.log('inside get nums');
      //   yield 1;
      //   console.log('inside get nums');
      //   yield 2;
      //   console.log('inside get nums');
      //   yield 3;
      // }

      // for (let num of getNums()) {

      //   console.log('in for of loop');
      //   console.log(num);

      // }

      // fetch('http://localhost:3050/cars', {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify({ make: 'a', model: 'a', year: 1900, color: 'g', price: 123 }),
      // })
      //   .then(res => res.json())
      //   .then(car => console.log(car));
    
    </script>

  </body>
</html>
